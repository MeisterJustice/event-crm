let getIndex,getFacebookLogin,postFacebookLogin,getRegister,postRegister,getLogin,postLogin,getLogout,getProfile,updateProfile,postForm,emailSignup,donate,getDonate,forgotPassword,putForgotPassword,resetPassword,putResetPassword,errorHandler,isLoggedIn,isEventOwner,checkIfUserExists,isValidPassword,changePassword;_361‍.x([["default",()=>_361‍.o]]);_361‍.w("../controllers/index",[["getIndex",["getIndex"],function(v){getIndex=v}],["getFacebookLogin",["getFacebookLogin"],function(v){getFacebookLogin=v}],["postFacebookLogin",["postFacebookLogin"],function(v){postFacebookLogin=v}],["getRegister",["getRegister"],function(v){getRegister=v}],["postRegister",["postRegister"],function(v){postRegister=v}],["getLogin",["getLogin"],function(v){getLogin=v}],["postLogin",["postLogin"],function(v){postLogin=v}],["getLogout",["getLogout"],function(v){getLogout=v}],["getProfile",["getProfile"],function(v){getProfile=v}],["updateProfile",["updateProfile"],function(v){updateProfile=v}],["postForm",["postForm"],function(v){postForm=v}],["emailSignup",["emailSignup"],function(v){emailSignup=v}],["donate",["donate"],function(v){donate=v}],["getDonate",["getDonate"],function(v){getDonate=v}],["forgotPassword",["forgotPassword"],function(v){forgotPassword=v}],["putForgotPassword",["putForgotPassword"],function(v){putForgotPassword=v}],["resetPassword",["resetPassword"],function(v){resetPassword=v}],["putResetPassword",["putResetPassword"],function(v){putResetPassword=v}]]);_361‍.w("../middleware",[["errorHandler",["errorHandler"],function(v){errorHandler=v}]]);_361‍.w("../validation/index",[["isLoggedIn",["isLoggedIn"],function(v){isLoggedIn=v}],["isEventOwner",["isEventOwner"],function(v){isEventOwner=v}],["checkIfUserExists",["checkIfUserExists"],function(v){checkIfUserExists=v}],["isValidPassword",["isValidPassword"],function(v){isValidPassword=v}],["changePassword",["changePassword"],function(v){changePassword=v}]]);const express = require('express');
const router = express.Router();
const multer = require('multer');
const { storage } = require('../cloudinary');
const upload = multer({ storage });


































router.get('/', errorHandler(getIndex));

router.post('/', postForm);

router.post('/paystack/pay', donate);

router.get('/paystack/callback', getDonate);

router.post('/email-signup', errorHandler(emailSignup));

router.get('/auth/facebook', getFacebookLogin);

router.get('/auth/facebook/callback', postFacebookLogin);

router.get('/register', errorHandler(getRegister));

router.post("/register", errorHandler(checkIfUserExists), upload.single('image'), errorHandler(postRegister));

router.get("/login", errorHandler(getLogin));

router.post("/login", errorHandler(postLogin));

router.get("/logout", errorHandler(getLogout));

router.get('/profile', isLoggedIn, errorHandler(getProfile));

router.put('/profile', isLoggedIn, upload.single('image'), errorHandler(isValidPassword), errorHandler(changePassword), errorHandler(updateProfile) );

router.get('/forgot-password', forgotPassword);

router.put('/forgot-password', errorHandler(putForgotPassword));

router.get('/reset-password/:token', errorHandler(resetPassword));

router.put('/reset-password/:token', errorHandler(putResetPassword));

_361‍.d(router);